<dom-module id="multi-feature-demo">
  <template>
    <style include="vaadin-component-demo-shared-styles">
      :host {
        display: block;
        
        /* defines a mxin for multi-drawable-feature*/
        --multi-drawable-feature: {
            fill: var(--primary-color);
            stroke: white;
         };
              
      }
              
    </style>
    <h3>Geo Projection Demo</h3>
    <p>Playing around with topojson feature and d3-projection.</p>
    <vaadin-demo-snippet id='multi-projection-serie-demo-binding'>
      <template preserve-content>
        <dom-bind id="app">
          <template>
            <style>
             #chart {
                height: 500px;
              }
            </style>
            <!-- fetch topojson features from  -->
            <topojson-feature id="feature" feature="{{feature}}" data="{{geometries}}" name="countries" url="worldSimplify01.json"></topojson-feature>
            <!-- configure transition for this chart  -->
            <d3-transition transition="{{transition}}" duration="500"></d3-transition>
            <!-- a multi-container-geo will expose path and projection -->
            <multi-container-geo
              id="chart"
              enable-zoom
              projection="{{projection}}"
              path="{{path}}"
              projection-type="[[projectionType]]"
              rotate="[[rotate]]"
              translate="[[translate]]"
              scale="[[scale]]"
              >
                <!-- group of geo elements. When feature changes, contained elements will redraw -->
                <multi-container-layer>
                  <!-- draw features with with projected path-->
                  <multi-drawable-feature geo-data="[[feature]]" transition="[[transition]]" path="[[path]]"></multi-drawable-feature>
                </multi-container-layer>
              </multi-container-geo>
              <div id="control">
                <p>type of projection: </p>
                <paper-radio-group selected="{{projectionType}}">
                  <paper-radio-button name="geoMercator">mercator</paper-radio-button>
                  <paper-radio-button name="geoAzimuthalEqualArea">azimuthal equalArea</paper-radio-button>
                  <paper-radio-button name="geoTransverseMercator">transverse mercator</paper-radio-button>
                </paper-radio-group>
                <paper-input label="scale" min="0" step="50" type="number" value="{{scale}}"></paper-input>
                <paper-input label="rotation" min="0" step="1" type="number" value="{{rotate}}"></paper-input>
              </div>
          </template>
        </dom-bind>
      </template>
    </vaadin-demo-snippet>
    <script>
      window.addDemoReadyListener('#multi-projection-serie-demo-binding', function(document) {

      app = document.querySelector('#app');
      app.scale = 200;
      app.rotate = 19;
      app.projectionType = 'geoMercator';
      });
    </script>
  </template>
  <script>
  (function() {

    class FeatureDemo extends DemoReadyEventEmitter(MultiChart.Demo(Polymer.Element)) {
      static get is() {
        return 'multi-feature-demo';
      }
    }
    customElements.define(FeatureDemo.is, FeatureDemo);

    if (!window.MultiChart) {
      window.MultiChart = {};
    }
    window.MultiChart.FeatureDemo = FeatureDemo;

  })();
  </script>
</dom-module>