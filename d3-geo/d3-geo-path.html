<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../multi-chart/helper/config-helper-mixin.html">
<dom-module id="d3-geo-path">
  <script>
  (function() {

    /**
     * ## D3GeoPath
     *
     * `<d3-geo-path>` a wrapper for geographic path generator with the default settings as in [d3.geoPath](https://github.com/d3/d3-geo#geoPath)
     *
     * @memberof MultiChart
     * @customElement
     * @polymer
     * @appliesMixin MultiChart.mixin.ConfigHelper
     * @demo
     **/
    class D3GeoPath extends 
      MultiChart.mixin.ConfigHelper(Polymer.Element) {

      static get is() { return 'd3-geo-path'; }

      static get properties() {
        return {
          /**
           * `path` the [path](https://github.com/d3/d3-geo#geoPath) generator function
           */
          path: {
            type: Function,
            notify: true,
            value: function() {
              var path = d3.geoPath();
              this.applyConfig(path, ['projection', 'context']);
              return path;
            }
          },

          /**
           * [`projection`]((https://github.com/d3/d3-geo#path_projection)) to be applied to the path  
           */
          projection: {
            type: Function
          },

          /**
           * [`context`](https://github.com/d3/d3-geo#path_context) to be applied to the path  
           */
          context: {
            type: Function
          }
        };
      }

      static get observers() {
        return [
          'observeConfig(projection, "projection", "path", "refresh")',
          'observeConfig(context, "context", "path", "refresh")',
        ];
      }
      /**
       * [`area`](https://github.com/d3/d3-geo#path_area) returns the projected planar area for the specified GeoJSON `object` 
       */
      area(object) {
        return this.path.area(object);
      }

      /**
       * [`bounds`](https://github.com/d3/d3-geo#path_bounds) returns the projected planar bounding box for the specified GeoJSON `object` 
       */
      bounds(object) {
        return this.path.bounds(object);
      }

      /**
       * [`centroid`](https://github.com/d3/d3-geo#path_centroid) returns the projected planar centroid for the specified GeoJSON `object` 
       */
      centroid(object) {
        return this.path.centroid(object);
      }
    }

    customElements.define(D3GeoPath.is, D3GeoPath);

    if (!window.MultiChart) {
      window.MultiChart = {};
    }

    /* 
     * @namespace MultiChart
     */
    window.MultiChart.D3GeoPath = D3GeoPath;

  })();
  </script>
</dom-module>